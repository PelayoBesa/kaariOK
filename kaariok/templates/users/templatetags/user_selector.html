<span id=user_selector_tag>
	<script type="text/javascript">
		var user_selector_tag_state_indicator_styles = 'style="width:25px;"';
		$(document).ready(function(){
			$("#user_selector_tag_selector").change( function(){
				//Login user here. With an indicator thar the user is changing.
				$.getJSON(
					"/accounts/login/"+$("#user_selector_tag_selector").val()+"/",
					function(data){
						if(data['success'])
							$("#user_selector_tag_state_indicator").html(
									"<img src='/site_media/images/utils/checkmark.png' "+user_selector_tag_state_indicator_styles+" />");
						else
							$("#user_selector_tag_state_indicator").html(
									"<img src='/site_media/images/utils/fail.png' "+user_selector_tag_state_indicator_styles+"/>");
						setTimeout(function(){
							$("#user_selector_tag_state_indicator").fadeOut('slow',function(){$("#user_selector_tag_state_indicator").html('')}).fadeIn('fast');
						},2000);
					}
				);
				$("#user_selector_tag_state_indicator").html("<img src='/site_media/images/utils/ajax-loader.gif'"+user_selector_tag_state_indicator_styles+"/>");
			
		});
	});
	</script>
	<select id="user_selector_tag_selector" size="1">
		{% if not user.is_authenticated %}
			<option value="" selected>--</option>
		{% endif %}
		{% for option_user in users%}
			<option value="{{option_user.id}}"  
				{% ifequal selected_user option_user.id  %} 
					selected
				{% endifequal %}>
				{{option_user.username}}
			</option>
		{% endfor %}	
	</select> <span id="user_selector_tag_state_indicator" style="vertical-align:sub;"></span>
</span>